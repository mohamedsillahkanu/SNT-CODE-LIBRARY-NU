<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Library UI</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            background-color: #1e1e2e;
            color: #ffffff;
            overflow: hidden;
        }
        .sidebar {
            width: 15%; /* Fixed sidebar width */
            background-color: #28293d;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
            position: fixed; /* Sidebar fixed on left */
            height: 100vh;
        }
        .sidebar h2 {
            color: #47B5FF;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li {
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            user-select: none;
        }
        .sidebar li.active {
            background-color: #47B5FF;
            color: #000000;
        }
        .dropdown-content {
            display: none;
            padding-left: 20px;
            background-color: #3a3b52;
            border-radius: 5px;
            margin-top: 5px;
        }
        .sidebar li.open .dropdown-content {
            display: block;
        }
        .content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
            margin-left: 30%; /* Adjust content to leave space for sidebar */
        }
        .section-buttons {
            align-self: flex-start;
            margin-bottom: 20px;
        }
        .section-buttons button {
            padding: 10px;
            margin-right: 10px;
            background-color: #474761;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .section-buttons button.active {
            background-color: #47B5FF;
            color: #000000;
        }
        .topic-intro {
            background-color: #ffffff;
            color: #000;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .code-section, .image-section {
            background-color: #33334d;
            border-radius: 10px;
            padding: 20px;
            overflow: auto;
        }
        .code-section h3, .image-section h3 {
            margin-top: 0;
        }
        .full-code {
            background-color: #ffffff;
            padding: 10px;
            border-radius: 10px;
            color: #000;
            margin-top: 10px;
        }
        .sample-image {
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #FF6347;
            border-radius: 10px;
            padding: 10px;
        }
        .sample-image img {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 10px;
        }
    </style>
    <script>
        let currentSection = '';
        let currentLanguage = '';

        // Load content based on the URL hash
        window.onload = function() {
            const currentUrl = window.location.href;

            if (currentUrl.includes('#overview')) {
                loadContent('overview');
            } else if (currentUrl.includes('#shapefile-info')) {
                loadContent('shapefile-info');
            } else if (currentUrl.includes('#vector-analysis')) {
                loadContent('vector-analysis');
            } else if (currentUrl.includes('#data-cleaning')) {
                loadContent('data-cleaning');
            }
        };

        // Function to load content based on section
        function loadContent(section) {
            currentSection = section;
            updateContent();
            document.querySelectorAll('.sidebar li').forEach(el => el.classList.remove('active'));
            document.querySelector(`#${section}-btn`).classList.add('active');
            window.location.hash = section; // Update URL hash when a section is selected
        }

        // Update the content based on selected section and language
        function updateContent() {
            const topicIntro = document.querySelector('.topic-intro');
            const codeDisplay = document.querySelector('.full-code');
            const sampleImage = document.querySelector('.sample-image img');

            // Display overview content
            if (currentSection === 'overview') {
                topicIntro.innerHTML = `
                    <h3 class="sidebar-title">Version: 3 October 2024 </h3>
                    <h3 class="sidebar-title">Authors: Mohamed Sillah Kanu, Sammy Oppong, Jaline Gerardin </h3>
                    <h2>Overview</h2>
                    <h3>Motivation</h3>
                    <p>SNT is here to stay: many NMCPs have found it useful and are continuing to embrace it and further develop it for their analytical needs. Since 2019, multiple individuals have supported the analysis portions of SNT. In most cases, individuals have built their own code in a variety of languages (Stata, R, and Python), sometimes building on othersâ€™ previous code and sometimes re-developed independently.</p>
                    <h3>Objectives</h3>
                    <p>We will build a code library for SNT analysis to:</p>
                    <p>1. Improve quality and reproducibility of SNT analysis by ensuring that analysts are using similar, correct approaches.</p>
                    <p>2. Improve efficiency of SNT analysis by minimizing duplication of effort.</p>
                    <p>3. Promote accessibility of SNT analysis by lowering barriers to entry.</p>
                    <h3>Target audience</h3>
                    <p>Anyone doing this kind of work. We assume some basic knowledge of R, some understanding of the data, and a strong connection to the NMCP.</p>
                    <h3>Scope</h3>
                    <p>All analysis steps of SNT up to but not including mathematical modeling; some related analysis.</p>
                `;
                document.querySelector('.code-section').style.display = 'none';
                document.querySelector('.image-section').style.display = 'none';
                return;
            }

            // Display error if no section or language selected
            if (!currentLanguage) {
                topicIntro.innerText = 'Error: Please select both a section and a language.';
                codeDisplay.innerText = '';
                sampleImage.src = '';
                document.querySelector('.code-section').style.display = 'none';
                document.querySelector('.image-section').style.display = 'none';
                return;
            }

            // Show content if both section and language are selected
            document.querySelector('.code-section').style.display = 'block';
            document.querySelector('.image-section').style.display = 'block';

            // Example of content for other sections
            if (currentSection === 'shapefile-info' && currentLanguage === 'R English') {
                topicIntro.innerText = 'R code to display shapefile info.';
                codeDisplay.innerText = `
library(sf)
admin <- st_read("/path/to/admin.shp")
print(admin)`;
                sampleImage.src = 'https://raw.githubusercontent.com/mohamedsillahkanu/SNT-CODE-LIBRARY-NU/main/shapefile-info.png';
            } else if (currentSection === 'vector-analysis' && currentLanguage === 'Python English') {
                topicIntro.innerText = 'Python code for vector analysis.';
                codeDisplay.innerText = `
import matplotlib.pyplot as plt
plt.scatter(x_coords, y_coords)
plt.show()`;
                sampleImage.src = 'https://via.placeholder.com/300x200.png?text=Vector+Analysis+Example';
            } else if (currentSection === 'data-cleaning' && currentLanguage === 'R English') {
                topicIntro.innerText = 'R code for data cleaning.';
                codeDisplay.innerText = `
library(dplyr)
clean_data <- data %>% filter(!is.na(variable))`;
                sampleImage.src = 'https://via.placeholder.com/300x200.png?text=Data+Cleaning+Example';
            }
        }

        // Function to handle sidebar item clicks and toggle active state
        function selectSidebarItem(event, item, section) {
            event.stopPropagation();
            document.querySelectorAll('.sidebar li').forEach(el => el.classList.remove('active'));
            item.classList.add('active');
            loadContent(section);
        }

        // Language button click handler
        function showCode(language) {
            currentLanguage = language;
            updateContent();
            document.querySelectorAll('.section-buttons button').forEach(el => el.classList.remove('active'));
            document.querySelector(`#${language.toLowerCase().replace(' ', '-')}-btn`).classList.add('active');
        }
    </script>
</head>
<body>
    <div class="sidebar">
        <h2>Code Library</h2>
        <ul>
            <li id="overview-btn" onclick="loadContent('overview')">Overview</li>
            <li class="dropdown" onclick="this.classList.toggle('open')">
                <span>Shapefile Info</span>
                <ul class="dropdown-content">
                    <li onclick="selectSidebarItem(event, this, 'shapefile-info')">Shapefile Info</li>
                    <li onclick="selectSidebarItem(event, this, 'vector-analysis')">Vector Analysis</li>
                    <li onclick="selectSidebarItem(event, this, 'data-cleaning')">Data Cleaning</li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="content">
        <div class="section-buttons">
            <button id="r-english-btn" onclick="showCode('R English')">R English</button>
            <button id="python-english-btn" onclick="showCode('Python English')">Python English</button>
        </div>
        <div class="topic-intro">
            <p>Select a section and a language to display code and sample image.</p>
        </div>
        <div class="main-content">
            <div class="code-section">
                <h3>Code</h3>
                <pre class="full-code"></pre>
            </div>
            <div class="image-section">
                <h3>Sample Image</h3>
                <div class="sample-image">
                    <img src="" alt="Sample Image">
                </div>
            </div>
        </div>
    </div>
</body>
</html>
