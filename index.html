<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Library UI</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            background-color: #1e1e2e;
            color: #ffffff;
            overflow: hidden;
        }

        .sidebar {
            width: 250px;
            background-color: #28293d;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
            scrollbar-width: none;
        }

        .sidebar::-webkit-scrollbar {
            display: none;
        }

        .sidebar h2 {
            color: #47B5FF;
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar li {
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            position: relative;
        }

        .sidebar li:hover {
            background-color: #3a3b52;
        }

        .sidebar li.active {
            background-color: #47B5FF;
            color: #000000;
        }

        .dropdown-content {
            display: none;
            margin-left: 20px;
            margin-top: 5px;
            background-color: #3a3b52;
            padding-left: 10px;
            border-radius: 5px;
        }

        .dropdown-content.show {
            display: block;
        }

        .dropdown-content li {
            padding: 8px;
            cursor: pointer;
        }

        .dropdown-content li:hover {
            background-color: #474761;
        }

        .content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
            scrollbar-width: none;
        }

        .content::-webkit-scrollbar {
            display: none;
        }

        .section-buttons {
            align-self: flex-end;
            margin-bottom: 20px;
        }

        .section-buttons button {
            padding: 10px;
            margin-left: 10px;
            background-color: #474761;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .section-buttons button.active {
            background-color: #47B5FF;
            color: #000000;
        }

        .section-buttons button:hover {
            background-color: #3a3b52;
        }

        .main-content {
            display: flex;
            height: calc(100% - 100px);
        }

        .code-section,
        .image-section {
            flex: 1;
            background-color: #33334d;
            border-radius: 10px;
            padding: 20px;
            overflow: auto;
            margin: 10px;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .full-code {
            background-color: #ffffff;
            padding: 10px;
            border-radius: 10px;
            overflow: auto;
            margin-top: 10px;
            color: #000;
            display: none;
        }

        .sample-image {
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #FF6347;
            border-radius: 10px;
            padding: 10px;
        }

        .sample-image img {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 10px;
        }

        .copy-btn {
            padding: 8px;
            background-color: #47B5FF;
            color: #000000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .copy-btn:hover {
            background-color: #3a3b52;
            color: #ffffff;
        }

        .copy-btn.active {
            background-color: #00E0B5;
            color: #000000;
        }
    </style>
    <script>
        let currentSection = null;

        function selectSidebarItem(item, section) {
            // Highlight the selected sidebar item
            const sidebarItems = document.querySelectorAll('.sidebar li');
            sidebarItems.forEach(el => el.classList.remove('active'));
            item.classList.add('active');

            // Update URL hash
            window.location.hash = `/${section}`;
            currentSection = section;
            document.querySelector('.full-code').style.display = 'none';
            document.querySelector('.sample-image img').src = 'https://via.placeholder.com/300x200.png?text=Select+a+Code+Language';
        }

        function toggleDropdown(item) {
            const dropdownContent = item.nextElementSibling;
            if (dropdownContent.classList.contains('show')) {
                dropdownContent.classList.remove('show');
            } else {
                // Close any other open dropdowns
                const dropdowns = document.querySelectorAll('.dropdown-content');
                dropdowns.forEach(dd => dd.classList.remove('show'));

                dropdownContent.classList.add('show');
            }
        }

        function showCode(language) {
            if (!currentSection) {
                alert('Please select a section from the sidebar first.');
                return;
            }
            window.location.hash = `/${currentSection}/${language.toLowerCase().replace(' ', '-')}`;

            const codeSnippets = {
                "shapefile-info": {
                    "r-english": `# Load necessary libraries
library(sf)

# Load shapefile
admin <- st_read("/path/to/admin.shp")

# Print shapefile info
print(admin)`,
                    "python-english": `import geopandas as gpd

# Load shapefile
admin = gpd.read_file("/path/to/admin.shp")

# Print shapefile info
print(admin.head())`,
                    "stata-english": `* Load shapefile
shp2dta using "/path/to/admin.shp", database(admin_db) coordinates(admin_coords)

* List shapefile info
list`
                }
            };

            const selectedCode = codeSnippets[currentSection]?.[language.toLowerCase().replace(' ', '-')];
            const codeDisplay = document.querySelector('.full-code');
            if (selectedCode) {
                codeDisplay.innerText = selectedCode;
                codeDisplay.style.display = 'block';
                // Change the sample image to a relevant example image
                document.querySelector('.sample-image img').src = `https://raw.githubusercontent.com/mohamedsillahkanu/SNT-CODE-LIBRARY-NU/16df021948e18e142e103ee7e9c78ff8311005ef/${currentSection}.png`;
            } else {
                codeDisplay.innerText = 'No code available.';
                codeDisplay.style.display = 'block';
            }

            // Update active button styling
            const buttons = document.querySelectorAll('.section-buttons button');
            buttons.forEach(button => button.classList.remove('active'));
            const activeButton = document.querySelector(`#${language.toLowerCase().replace(' ', '-')}-btn`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
        }

        function copyCode(section) {
            let codeToCopy;
            if (section === 'code-section') {
                codeToCopy = document.querySelector('.full-code').innerText;
            }
            navigator.clipboard.writeText(codeToCopy).then(() => {
                const button = document.querySelector(`button[onclick="copyCode('${section}')"]`);
                button.classList.add('active');
                setTimeout(() => {
                    button.classList.remove('active');
                }, 1000);
            });
        }
    </script>
</head>

<body>
    <div class="sidebar">
        <h2>Code Library</h2>
        <ul>
            <li onclick="toggleDropdown(this)">
                A.1 Shapefiles
                <ul class="dropdown-content">
                    <li onclick="selectSidebarItem(this, 'shapefile-info')">Shapefile Info</li>
                    <li onclick="selectSidebarItem(this, 'basic-plot')">Basic Plot</li>
                    <li onclick="selectSidebarItem(this, 'admin-unit-overlay')">Admin Unit Overlay</li>
                </ul>
            </li>
            <li onclick="toggleDropdown(this)">
                A.2 Health Facilities
                <ul class="dropdown-content">
                    <li onclick="selectSidebarItem(this, 'health-info')">R</li>
                    <li onclick="selectSidebarItem(this, 'health-info')">Python</li>
                    <li onclick="selectSidebarItem(this, 'health-info')">Stata</li>
                </ul>
            </li>
            <li onclick="toggleDropdown(this)">
                A.3 Routine Case Data from DHIS2
                <ul class="dropdown-content">
                    <li onclick="selectSidebarItem(this, 'routine-case-data')">R</li>
                    <li onclick="selectSidebarItem(this, 'routine-case-data')">Python</li>
                    <li onclick="selectSidebarItem(this, 'routine-case-data')">Stata</li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="content">
        <div class="section-buttons">
            <button onclick="showCode('R English')" id="r-english-btn">R English</button>
            <button onclick="showCode('R French')" id="r-french-btn">R French</button>
            <button onclick="showCode('Python English')" id="python-english-btn">Python English</button>
            <button onclick="showCode('Python French')" id="python-french-btn">Python French</button>
            <button onclick="showCode('Stata English')" id="stata-english-btn">Stata English</button>
            <button onclick="showCode('Stata French')" id="stata-french-btn">Stata French</button>
        </div>
        <div class="topic-intro" style="background-color: #ffffff; color: #000; padding: 20px; border-radius: 10px;">
            <p style="font-style: italic;">Welcome to the Code Library UI. Here you will find various examples of code snippets related to geospatial analysis, data visualization, and more. For further reading, please check out the following links:</p>
            <ul>
                <li><a href="https://en.wikipedia.org/wiki/Shapefile" target="_blank" style="color: #47B5FF;">Shapefile - Wikipedia</a></li>
                <li><a href="https://geopandas.org/" target="_blank" style="color: #47B5FF;">Geopandas Documentation</a></li>
                <li><a href="https://ggplot2.tidyverse.org/" target="_blank" style="color: #47B5FF;">ggplot2 Documentation</a></li>
            </ul>
        </div>
        <div class="main-content">
            <div class="code-section">
                <div class="code-header">
                    <h3>Code</h3>
                    <button class="copy-btn" onclick="copyCode('code-section')">Copy</button>
                </div>
                <pre class="full-code" style="background-color: #ffffff; color: #000;">No code selected.</pre>
            </div>
            <div class="image-section">
                <h3>Sample Image</h3>
                <div class="sample-image">
                    <img src="https://raw.githubusercontent.com/mohamedsillahkanu/SNT-CODE-LIBRARY-NU/16df021948e18e142e103ee7e9c78ff8311005ef/overlay%20final3.png" alt="Sample Image">
                </div>
            </div>
        </div>
    </div>
</body>

</html>
